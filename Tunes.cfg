
#############################################
#  Beeper Tones
#  https://github.com/majarspeed/Profiles-Gcode-Macros/blob/main/Beeper%20tunes/tones.cfg
#  https://ellis3dp.com/Print-Tuning-Guide/articles/useful_macros/beeper.html#pwm-beeper
#############################################

# start_tones
# print_start_tune
# end_tones
# end_tune
# change_tune
# mesh_tune
# starter_tune
# cena_tune
# mario_tune
# game_over_tune
# imperial_tune
# be_mine_tune
# sweet_child_tune
# zelda_ending_tune
# zelda_end_tune

[output_pin Beeper]
#[pwm_cycle_time _BEEPER_pin]
pin: PF8
value: 0
shutdown_value: 0
pwm: True
cycle_time: 0.0005 ; Default beeper tone in kHz. 1 / 0.0005 = 2000Hz (2kHz)

#[pwm_cycle_time Beeper]
#pin: PF8
#value: 0
#shutdown_value: 0
#cycle_time: 0.00100
#scale: 1.0

[gcode_macro TOGGLE_BEEPER]
description: Toggle the printer beeper on and off.
gcode:
	{% set beeper_state = printer.save_variables.variables.beeper_state|lower %}

	{% if printer['gcode_macro _USER_VARIABLE'].debug == 1 %}
		{action_respond_info('==== TOGGLE_BEEPER ====')}
		{action_respond_info("beeper_state: %s" % (beeper_state))}
		{action_respond_info('===============')}
	{% endif %}

	{% if beeper_state == "off" %}
		{action_respond_info('beeper is off, turning it on')}
		SAVE_VARIABLE VARIABLE=beeper_state VALUE='"on"'
	{% else %}
		{action_respond_info('beeper is on= turning it off')}
		SAVE_VARIABLE VARIABLE=beeper_state VALUE='"off"'
	{% endif %}
	SONG_SINGLE_BEEP

[gcode_macro SONG_SINGLE_BEEP]
gcode:
	M300 S830.61 P137

[gcode_macro M300]
description: Main Beeper Macro
gcode:
	{% set S = params.S|default(1000)|int %}
	{% set P = params.P|default(100)|int %}

		SET_PIN PIN=Beeper VALUE=0.5 CYCLE_TIME={ 1.0/S if S > 0 else 1 }
		G4 P{P}
		SET_PIN PIN=Beeper VALUE=0

[gcode_macro SONG_STARWARS_IMP]
gcode:
	M300 S1174 P401
	M300 S1174 P401
	M300 S1174 P401
	M300 S466 P267
	M300 S1396 P133
	M300 S1174 P401
	M300 S466 P267
	M300 S1396 P133
	M300 S1174 P803

[gcode_macro SONG_LOONEY]
gcode:
	M300 S2093 P428
	M300 S2793 P214
	M300 S2637 P214
	M300 S2349 P214
	M300 S2093 P214
	M300 S880 P642
	M300 S2093 P214
	M300 S2793 P214
	M300 S2637 P214
	M300 S2349 P214
	M300 S2489 P214
	M300 S2637 P642
	M300 S2637 P214
	M300 S2637 P214
	M300 S2093 P214
	M300 S2349 P214
	M300 S2093 P214
	M300 S2637 P214
	M300 S2093 P214
	M300 S2349 P214
	M300 S880 P214
	M300 S2093 P214
	M300 S1567 P214
	M300 S932 P214
	M300 S880 P214
	M300 S1396 P214

[gcode_macro Start_Tones]
description: chirp to indicate starting
gcode:
    M300 S1000 P500
    M300 S440  P200
    M300 S220  P100

[gcode_macro Print_Start_Tune]
description: tune to indicate starting to print
gcode:
    M300 S1000 P500
    M300 S440  P200
    M300 S220  P250
    M300 S440  P200
    M300 S220  P250
    M300 S440  P200
    M300 S1000 P1000

[gcode_macro End_Tones]
description: Make Print Completed Tones
gcode:
    M300 S440 P200 
    M300 S660 P250
    M300 S880 P300

[gcode_macro End_Tune]
description: Ending tune
gcode:
    M300 S3135 P75
    M300 S3135 P150
    M300 S1760 P150
    M300 S1760 P150
    M300 S2637 P150
    M300 S2637 P150
    M300 S3135 P150

[gcode_macro Change_Tune]
description: Change filament tune
gcode:
    M300 S440 P200
    M300 S660 P250
    M300 S880 P300

[gcode_macro Starter_Tune]
description: Boot up Tune
gcode:
    M300 S1174 P125
    M300 S1174 P125
    M300 S2349 P125
    M300 S0 P125
    M300 S880 P187
    M300 S0 P187
    M300 S1661 P125
    M300 S1567 P125
    M300 S0 P125
    M300 S1396 P250
    M300 S1174 P125
    M300 S1396 P125
    M300 S1567 P125
    M300 S1046 P125
    M300 S1046 P125
    M300 S2349 P125
    M300 S0 P125
    M300 S880 P187
    M300 S0 P187
    M300 S1661 P125
    M300 S1567 P125
    M300 S0 P125
    M300 S1396 P250
    M300 S1174 P125
    M300 S1396 P125
    M300 S1567 P125
    M300 S493 P125
    M300 S493 P125
    M300 S2349 P125
    M300 S0 P125
    M300 S880 P187
    M300 S0 P187
    M300 S1661 P125
    M300 S1567 P125
    M300 S0 P125
    M300 S1396 P250
    M300 S1174 P125
    M300 S1396 P125
    M300 S1567 P125
    M300 S466 P125
    M300 S466 P125
    M300 S2349 P125
    M300 S0 P125
    M300 S880 P187
    M300 S0 P187
    M300 S1661 P125
    M300 S1567 P125
    M300 S0 P125
    M300 S1396 P250
    M300 S1174 P125
    M300 S1396 P125
    M300 S1567 P125

[gcode_macro Mario_Tune]
description: Super Mario level completed tune
gcode:
    M300 S1046 P150
    M300 S1318 P150
    M300 S1567 P150
    M300 S2093 P150
    M300 S2637 P150
    M300 S3135 P400
    M300 S2637 P400
    M300 S1046 P150
    M300 S1244 P150
    M300 S1661 P150
    M300 S2093 P150
    M300 S2489 P150
    M300 S3322 P400
    M300 S2489 P400
    M300 S1174 P150
    M300 S1396 P150
    M300 S932 P150
    M300 S2349 P150
    M300 S2793 P150
    M300 S1864 P150
    M300 S0 P400
    M300 S1864 P120
    M300 S0 P60
    M300 S1864 P120
    M300 S0 P60
    M300 S1864 P120
    M300 S0 P60
    M300 S4186 P900 ;Congrats

[gcode_macro Game_Over_Tune]
description: Super Mario game over tune
gcode:
    M300 P200 S523
    M300 P200 S0
    M300 P200 S392
    M300 P200 S0
    M300 P300 S330
    M300 P233 S440
    M300 P233 S494
    M300 P233 S440
    M300 P300 S415
    M300 P300 S466
    M300 P300 S415
    M300 P150 S392
    M300 P150 S349
    M300 P1800 S392

